<!DOCTYPE html>
<html lang="zh-Hant">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>填寫收件資料 - 小跑豬專業版試算器</title>
    <link rel="icon" type="image/png" href="/assets/logo.png" />
    <link rel="stylesheet" href="style.css" />
    <style>
      .service-section {
        background-color: #f8f9fa;
        border: 1px solid #e9ecef;
        border-radius: 8px;
        padding: 20px;
        margin: 20px 0;
      }

      .service-section h3 {
        color: #1a73e8;
        margin-top: 0;
        margin-bottom: 15px;
        font-size: 1.2em;
      }

      .service-option {
        margin-bottom: 15px;
        padding: 15px;
        background-color: white;
        border-radius: 5px;
        border: 1px solid #ddd;
      }

      .service-checkbox {
        display: flex;
        align-items: center;
        margin-bottom: 10px;
      }

      .service-checkbox input[type="checkbox"] {
        width: 20px;
        height: 20px;
        margin-right: 10px;
        cursor: pointer;
      }

      .service-checkbox label {
        cursor: pointer;
        font-size: 1.1em;
        font-weight: bold;
        color: #333;
      }

      .service-details {
        display: none;
        margin-top: 15px;
        padding: 15px;
        background-color: #e9f5ff;
        border-radius: 5px;
        animation: slideDown 0.3s ease-out;
      }

      .service-details.active {
        display: block;
      }

      .detail-group {
        margin-bottom: 15px;
      }

      .detail-group label {
        display: block;
        margin-bottom: 5px;
        color: #666;
        font-weight: normal;
      }

      .detail-group input[type="number"],
      .detail-group select {
        width: 100%;
        padding: 8px;
        border: 1px solid #ccc;
        border-radius: 4px;
        font-size: 16px;
      }

      .radio-group {
        display: flex;
        gap: 20px;
        margin-top: 5px;
      }

      .radio-group label {
        display: flex;
        align-items: center;
        cursor: pointer;
      }

      .radio-group input[type="radio"] {
        margin-right: 5px;
        cursor: pointer;
      }

      .service-note {
        background-color: #fff3cd;
        color: #856404;
        padding: 10px;
        border-radius: 5px;
        margin-top: 10px;
        font-size: 0.9em;
      }

      @keyframes slideDown {
        from {
          opacity: 0;
          transform: translateY(-10px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .price-notice {
        background-color: #d1ecf1;
        color: #0c5460;
        padding: 15px;
        border-radius: 5px;
        margin: 20px 0;
        border-left: 4px solid #0c5460;
      }

      .price-notice strong {
        display: block;
        margin-bottom: 5px;
      }

      /* 新增的提示樣式 */
      .field-hint {
        font-size: 0.85em;
        color: #666;
        margin-top: 5px;
      }

      /* 響應式設計 */
      @media (max-width: 768px) {
        .service-section {
          padding: 15px;
        }

        .radio-group {
          flex-direction: column;
          gap: 10px;
        }
      }
    </style>
  </head>
  <body>
    <div class="calculator-container">
      <img src="/assets/logo.png" alt="小跑豬 LOGO" class="header-logo" />

      <h1>填寫台灣收件資料</h1>

      <form id="orderForm">
        <!-- 基本收件資料 -->
        <div class="input-wrapper" style="margin-bottom: 15px">
          <label for="recipientName">收件人姓名 (必填)</label>
          <input type="text" id="recipientName" required />
        </div>

        <div class="input-wrapper" style="margin-bottom: 15px">
          <label for="phone">聯絡電話 (必填)</label>
          <input type="tel" id="phone" required />
        </div>

        <div class="input-wrapper" style="margin-bottom: 15px">
          <label for="email">電子郵件 (必填，開立電子發票用)</label>
          <input type="email" id="email" required />
          <div class="field-hint">*電子發票將寄送至此信箱</div>
        </div>

        <div class="input-wrapper" style="margin-bottom: 15px">
          <label for="address">派送地址 (必填)</label>
          <input type="text" id="address" required />
        </div>

        <div class="input-wrapper" style="margin-bottom: 15px">
          <label for="idNumber">身分證字號 (必填，海關驗櫃用)</label>
          <input type="text" id="idNumber" required maxlength="10" />
          <div class="field-hint">
            *身分證字號僅用於海關驗櫃，我們會妥善保護您的個人資料
          </div>
        </div>

        <div class="input-wrapper" style="margin-bottom: 15px">
          <label for="taxId">統一編號 (選填)</label>
          <input
            type="text"
            id="taxId"
            maxlength="8"
            placeholder="公司行號請填寫8位數統一編號"
          />
          <div class="field-hint">*如需開立公司發票，請填寫統一編號</div>
        </div>

        <!-- 加值服務區 -->
        <div class="service-section">
          <h3>📦 加值服務選項</h3>

          <!-- 搬運上樓服務 -->
          <div class="service-option">
            <div class="service-checkbox">
              <input
                type="checkbox"
                id="needCarryUpstairs"
                onchange="toggleCarryDetails()"
              />
              <label for="needCarryUpstairs">
                需要搬運上樓服務（此部分費用請客戶自行付費給派送司機，未包含在跨境運費中）
              </label>
            </div>

            <div id="carryDetails" class="service-details">
              <div class="detail-group">
                <label for="floorNumber">請問需要搬運到幾樓？</label>
                <input
                  type="number"
                  id="floorNumber"
                  min="1"
                  max="30"
                  placeholder="請輸入樓層數"
                />
              </div>

              <div class="detail-group">
                <label>是否有電梯？</label>
                <div class="radio-group">
                  <label>
                    <input type="radio" name="hasElevator" value="yes" /> 有電梯
                  </label>
                  <label>
                    <input type="radio" name="hasElevator" value="no" /> 無電梯
                  </label>
                </div>
              </div>

              <div class="service-note">
                ⚠️
                請注意：搬運上樓費用需現場支付給司機，費用標準依實際情況（樓層、貨物重量體積、是否有電梯等）而定
              </div>
            </div>
          </div>

          <!-- 組裝服務 -->
          <div class="service-option">
            <div class="service-checkbox">
              <input
                type="checkbox"
                id="needAssembly"
                onchange="toggleAssemblyDetails()"
              />
              <label for="needAssembly">
                需要傢俱組裝服務（請向客服索取師傅聯繫方式，由客戶自行預約詢價）
              </label>
            </div>

            <div id="assemblyDetails" class="service-details">
              <div class="detail-group">
                <label for="assemblyItems">
                  請描述需要組裝的項目（例如：床架、衣櫃、書桌等）
                </label>
                <textarea
                  id="assemblyItems"
                  rows="3"
                  placeholder="請詳細說明需要組裝的家具項目..."
                  style="
                    width: 100%;
                    padding: 8px;
                    border: 1px solid #ccc;
                    border-radius: 4px;
                    font-size: 16px;
                    resize: vertical;
                  "
                ></textarea>
              </div>

              <div class="service-note">
                📞 我們將提供合作師傅的聯繫方式，組裝費用請直接與師傅洽談
              </div>
            </div>
          </div>
        </div>

        <!-- 價格提醒 -->
        <div class="price-notice">
          <strong>📌 重要提醒：</strong>
          加值服務說明：搬運上樓費用請現場支付給司機；組裝服務請自行聯繫師傅安排
        </div>

        <button type="submit" class="btn btn-calculate" style="width: 100%">
          確認送出訂單
        </button>
      </form>

      <div
        id="formMessage"
        style="margin-top: 20px; text-align: center; font-size: 1.1em"
      ></div>
    </div>

    <script>
      // 切換搬運詳情顯示
      function toggleCarryDetails() {
        const checkbox = document.getElementById("needCarryUpstairs");
        const details = document.getElementById("carryDetails");

        if (checkbox.checked) {
          details.classList.add("active");
          // 設置預設值
          document.getElementById("floorNumber").required = true;
        } else {
          details.classList.remove("active");
          document.getElementById("floorNumber").required = false;
          // 清空資料
          document.getElementById("floorNumber").value = "";
          const elevatorRadios = document.getElementsByName("hasElevator");
          elevatorRadios.forEach((radio) => (radio.checked = false));
        }
      }

      // 切換組裝詳情顯示
      function toggleAssemblyDetails() {
        const checkbox = document.getElementById("needAssembly");
        const details = document.getElementById("assemblyDetails");

        if (checkbox.checked) {
          details.classList.add("active");
        } else {
          details.classList.remove("active");
          // 清空資料
          document.getElementById("assemblyItems").value = "";
        }
      }

      // 驗證統一編號格式
      document.getElementById("taxId").addEventListener("input", function (e) {
        const value = e.target.value;
        // 只允許輸入數字
        e.target.value = value.replace(/[^\d]/g, "");
      });

      // 驗證身分證字號格式（簡單驗證）
      document
        .getElementById("idNumber")
        .addEventListener("input", function (e) {
          const value = e.target.value.toUpperCase();
          e.target.value = value;
        });

      // 驗證 Email 格式
      document.getElementById("email").addEventListener("blur", function (e) {
        const email = e.target.value;
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (email && !emailRegex.test(email)) {
          e.target.setCustomValidity("請輸入有效的電子郵件地址");
        } else {
          e.target.setCustomValidity("");
        }
      });
    </script>

    <!-- 原有的 order.js -->
    <script src="order.js"></script>
  </body>
</html>
